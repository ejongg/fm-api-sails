<!--START OF CONTENT -->


<!-- PAGE HEADERS -->

<div class="row">

    <div class="pageheader-left">
        <h1> Load Out </h1>
    </div>

    <div class="pageheader-right">
        <div class="form-group">
            <ul class="nav nav-tabs col-md-12">
                        <li>
                            <div class="search" ng-hide="">
                                <form method="get" action="/search" id="search">
                                    <input name="q" ng-model="search.$" type="text" size="50" placeholder="SEARCH" />
                                </form>
                            </div>
                        </li>
 <!--                        <li>
                            <a ng-click="" ng-hide="">
                                <h6><i class="mdi-content-add-box"/> &nbsp; ADD PURCHASE</h6></a>

                        </li> -->
                        <li>
                            <a ng-hide="" ng-click="">
                            <h6><i class="mdi-action-print center"/> &nbsp; PRINT</h6></a>
                        </li>
                    </ul>
                </div>
    </div>




</div>



<!-- BODY -->

<!-- DO NOT REMOVE-->
<div class="container">

     <!-- LEFT PANEL -->
    <div class="col-md-6">

    <div ng-hide="noCustomerOrders">
      <h4> CUSTOMERS ORDERS </h4>
      <div class="panel panel-body">
        <br>
        <br>

      <div ng-show="noCustomerOrders"  align="center">
              <h3><strong>NO CUSTOMER ORDERS! </strong></h3>
    </div>    
        
                  
    <table class="table table-condensed" style="border-collapse: collapse;">
            
                  <thead>
                      <tr>
                          <th>Customer Establishment</th>
                          <th>Distance</th>
                  </thead>
                  
                  <tbody>

                      <tr dir-paginate="order in customerOrders | filter: search | orderBy: sortCriteria | itemsPerPage: 10 " style="cursor:button;">
                          <td class="routesText">{{order.customer_id.establishment_name}}</td>
                          <td class="routesText">{{order.customer_id.distance}}</td>
                      </tr>

                  </tbody>

          </table>

          <dir-pagination-controls
            max-size="7"
            directional-links="true"
            boundary-links="true"
          >

          </dir-pagination-controls>

        </div>

    </div>
    </div>





    <div class="col-md-6">
      <h4>LOAD OUT </h4>
              <div class="panel panel-body">

                 <ul class="nav nav-tabs">
                        <li>
                            <a ng-click="showAddLoadOutBox(true)"><i class="mdi-content-add-box"/>
                              &nbsp;ADD&nbsp;</a>
                        </li>
                    </ul>
                    <br>

      <div ng-show="existingAddressInRouteError">{{existingAddressInRoute}}</div>

      <div ng-show="addLoadOutBox" class="form-group">
         <h4><i class="mdi-content-add-circle"></i> ADD LOAD OUT </h4>

          <form name="loadOutAddForm" ng-submit="addLoadOut(loadOut)" novalidate>
              <div ng-show="noCustomerOrdersAvailable">
                  NO CUSTOMER ORDER AVAILABLE
              </div>

              <div class="form-group" ng-hide="noCustomerOrdersAvailable">
                <label class="col-md-4">Establishment Name</label>

                <div class="col-md-6">
                  <select class="form-control" ng-model="ordersAvailableList" ng-options="orderAvailable as orderAvailable.order.customer_id.establishment_name for orderAvailable in customerOrdersAvailable">
                  </select>
                </div>
                  
                  <div class = "col-md-2">
                     <button class="btn btn-xs btn-default pull-right" type="button" ng-click="addAvaiableCustomer(ordersAvailableList)">ADD</button>
                  </div>
                 
              </div>
              
              <div ng-hide="noTrucks" class = "form-group">
                <label class="col-md-2  control-label">Truck: &nbsp; </label>

                <div class = "col-md-8">
                   <select class="form-control" ng-model="loadOut.truck" ng-options=" truck as truckName(truck) for truck in trucks" 
                ng-change="dropdownChange(loadOut.truck)" required>
                  </select>
                </div>

              </div>
              
              <div ng-show="noTrucks">
                  NO TRUCKS, ADD TRUCK FIRST
              </div>

<br>
              <div class="form-group ">

               <div class="col-md-6 pull-right" ng-hide="noTrucks">
                     <label class="col-md-3 control-label pull-right">Load Out #: &nbsp; </label>
                  <select class="form-control " ng-model="loadOut.loadout_no" ng-init="loadOut.loadout_no = loadOutNumbers[0]">
                    <option ng-repeat="number in loadOutNumbers" value="{{number}}">{{number}}
                    </option>
                 </select>
                </div>
         
              

              </div>
                
              
             
              
              <br><br><br>
              <div class="routeBox" > <br>

               <div ng-repeat="orderInAddLoudOut in loadOut.orders">

                   {{orderInAddLoudOut.order.customer_id.establishment_name}}

               </div>
             </div>

             <div class="form-group pull-right">
                <br>
               <button type="submit" ng-disabled="loadOutAddForm.$invalid || loadOut.orders.length === 0" class="btn btn-flat btn-primary">Add</button>

               <button type="button" ng-click="showAddLoadOutBox(false)" class="btn btn-xs btn-default">Cancel</button>
             </div>
          </form> 
        </div>
      </div>

      <br><br>

      <!-- loadoutbox -->

      <div ng-show="noLoadOut" align="center">
          <h3><strong>NO LOADOUTS!</strong></h3>
      </div>   
       
       <div ng-hide="noLoadOut" ng-repeat="loadOut in loadOuts">
          <div class="panel-primary" >
              <div class="panel-heading" >
                <h3 class="panel-title">{{getTruckNumber(loadOut.truck_id)}} Loud out #{{loadOut.loadout_number}}</h3>
              </div>

            <div class="rpanel panel-body" ng-hide="editIndex === $index">

              <label class="control-label">Establishment Name:</label>
                <div class = "col-md-offset-1" ng-repeat="customerOrder in loadOut.transactions"> {{customerOrder.customer_id.establishment_name}}
                </div>

                <div class="form-group pull-right" style="margin-bottom: -5px;">
                  <button ng-click="setEditLoadOut($index)" ng-hide="editIndex === $index" class=" btn btn-xs btn-primary" >EDIT</button>
                </div>
                
            </div>

            <div class="rpanel panel-body" ng-show="editIndex === $index">
              <div ng-show="noCustomerOrdersAvailable">
                  NO CUSTOMER ORDER AVAILABLE
              </div>

              <div class="form-group" ng-hide="noCustomerOrdersAvailable">
                <label class="col-md-4">Available Establishment</label>

                <div class="col-md-6">
                  <select class="form-control" ng-model="ordersAvailableListEdit" ng-options="orderAvailable as orderAvailable.order.customer_id.establishment_name for orderAvailable in customerOrdersAvailable">
                  </select>
                </div>
                  
                  <div class = "col-md-2">
                     <button class="btn btn-xs btn-default pull-right" type="button" 
                     ng-click="editAvailableCustomer(ordersAvailableListEdit,loadOut.loadout_number,loadOut.id,loadOut.transactions[0].truck_id)">ADD</button>
                  </div>
                 
              </div>
              

              <label class="col-md-12 control-label">Establishment Name:</label>
                <button  style = "padding: 4px; padding-left:8px; margin: 4px 4px;" ng-repeat="customerOrder in loadOut.transactions" class="btn btn-xs btn-danger"  ng-click="deleteAddressInRoute(routeInfo.id,address.id)"> {{customerOrder.customer_id.establishment_name}}&nbsp; &nbsp; <strong><i class="mdi-navigation-cancel"/></strong> </button>  &nbsp;

                 <br>
              <div class="form-group pull-right" style="margin-bottom: -5px;"> 

              <button class="btn btn-xs btn-default" ng-show="editIndex === $index" ng-click="setEditLoadOut(-1)">CANCEL</button> 
            </div>
            </div>

           
      </div>

       <br>
        <br>

    </div>


     </div>

</div> <!-- END OF WHITE PANEL | DON'T REMOVE! -->
<div class="snackbar-container" data-snackbar="true"></div>
</div> <!-- END OF CONTAINER   | DON'T REMOVE! -->


<!-- <div style="background-color:red;" ng-repeat="address in addresses" ng-drag="true" ng-drag-data="address" ng-drag-success="onDragComplete($data,$event)">
  Draggable div
</div>

<div style="background-color:green;width:100%;height:200px;" ng-drop="true" ng-drop-success="onDropComplete($data,$event)" >
  Drop area
</div>