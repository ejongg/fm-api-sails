<!--START OF CONTENT -->


<!-- PAGE HEADERS -->
<div class="row">

  <div class="pageheader-left">
    <h1> Routes </h1>
  </div>

  <div class="pageheader-right">
    <div class="form-group">
      <ul class="nav nav-tabs col-md-12">
        <!-- <li>
          <div class="search" ng-hide="noAddresses || noRoutes">
            <form method="get" action="/search" id="search">
              <input name="q" ng-model="search.$" type="text" size="50" placeholder="SEARCH" />
            </form>
            </div>
        </li> -->
        <li>
          <a ng-hide="noAddresses || noRoutes" ng-click="pagePrint()">
            <h6><i class="mdi-action-print center"/> &nbsp; PRINT</h6></a>
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="container">
  <div class="col-md-6">


    <!--  HIDE FOR PRINTER   -->
<div class="routeshide">


    <h4></i>ADDRESS </h4>
    <div class="panel panel-body">
      <ul class="nav nav-tabs" ng-hide="addAddressForm"> 
        <li>
            <a ng-click="showAddAddressForm(true)"><i class="mdi-content-add-box"/>
              &nbsp;ADD&nbsp;</a>
        </li>
        <li>
            <a ng-hide="noAddresses" ng-click="editState = !editState"><i class="mdi-editor-mode-edit"/>
              &nbsp;EDIT&nbsp;</a>
        </li>
        <li>
            <a ng-hide="noAddresses"ng-click="deleteState = !deleteState"><i class="mdi-navigation-cancel"/>
              &nbsp;DELETE&nbsp;</a>
        </li>
        <li class="pull-right">
          <div class="search" ng-hide="noAddresses">
            <form method="get" action="/search" id="search">
              <input name="q" ng-model="search.$" type="text" size="50" placeholder="SEARCH" />
            </form>
            </div>
         </li>
      </ul>

      <br>
       
       <div ng-show="noAddresses"  align="center">
              <h3><strong>NO ADDRESSES! </strong></h3>
      </div>   

      <div ng-show="addAddressForm">
      <h4><i class="mdi-content-add-circle"></i> ADD ADDRESS </h4>
      </div>

    </div>
      <!--  HIDE FOR PRINTER   -->

<div ng-show="addAddressForm">
<table class="table table-striped table-hover">

          <form name="addressForm" novalidate>
                  
                  <div ng-show="hasError" class="alert alert-dismissable alert-danger">
                     <button type="button" class="close" ng-click="showErrorMessage(false)">×</button>
                     <strong>{{errorMessage}}</strong>
                  </div>

                   <tr>
                    <td><label>Address:</label></td>
                    <td colspan="2">
                        <div class="col-md-10">
                            <input type="text" class="form-control" ng-model="address.address_name" required>
                            {{address.address_name}}
                          </div>
                    </td>
                  </tr>

                   <tr>
                    <td><label>Days:</label></td>
                    <td colspan="2">
                      <b>&nbsp; &nbsp; &nbsp;<div class="" ng-repeat="day in address.days" style="display:inline;">

                       <font style="text-transform: capitalize !important; color: red">
                          {{day}}, 
                        </font>
                      </div>

                      </p></b>
                    </td>
                  </tr>

            <tr>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="mondayButton" ng-change="addDay('monday')"> Monday
                </label>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="tuesdayButton" ng-change="addDay('tuesday')"> Tuesday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="wednesdayButton" ng-change="addDay('wednesday')"> Wednesday
                </label></div>
              </td>
              
            </tr>

            <tr>

              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="thursdayButton" ng-change="addDay('thursday')"> Thursday 
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="fridayButton" ng-change="addDay('friday')"> Friday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="saturdayButton" ng-change="addDay('saturday')"> Saturday
                </label></div>
              </td>
            </tr>
          </table>


           

            <div class="form-group pull-right">
              <br>
              <button type="submit" ng-click="addAddress(address)" ng-disabled="addressForm.$invalid || address.days.length === 0" class="btn btn-xs btn-primary">Add</button>
              <a type="button" ng-click="showAddAddressForm(false)" class="btn btn-xs btn-default">Cancel</a>
            </div>

          </form>
        </div>




        <div ng-show="editAddressForm">

          <table class="table table-striped table-hover">
       

                  <h4><i class="mdi-image-edit"></i> EDIT ADDRESS </h4>

   <form name="addressEditForm" novalidate>
                  <div ng-show="hasError" class="alert alert-dismissable alert-danger">
                     <button type="button" class="close" ng-click="showErrorMessage(false)">×</button>
                     <strong>{{errorMessage}}</strong>
                  </div>

                   <tr>
                    <td><label>Address:</label></td>
                    <td colspan="2">
                        <div class="col-md-10">
                            <input type="text" class="form-control" ng-model="addressEdit.address_name" required>
                          </div>
                    </td>
                  </tr>

                   <tr>
                    <td><label>Days:</label></td>
                    <td colspan="2">
                      <b>&nbsp; &nbsp; &nbsp;<div class="" ng-repeat="day in addressEdit.days" style="display:inline;">
                        <font style="text-transform: capitalize !important; color: red">
                          {{day}},
                        </font></div> </b>
                    </td>
                  </tr>

            <tr>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="mondayButtonEdit" ng-change="editDay('monday')"> Monday
                </label>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="tuesdayButtonEdit" ng-change="editDay('tuesday')"> Tuesday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="wednesdayButtonEdit" ng-change="editDay('wednesday')"> Wednesday
                </label></div>
              </td>
              
            </tr>

            <tr>

              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="thursdayButtonEdit" ng-change="editDay('thursday')"> Thursday 
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="fridayButtonEdit" ng-change="editDay('friday')"> Friday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="saturdayButtonEdit" ng-change="editDay('saturday')"> Saturday
                </label></div>
              </td>
            </tr>
          </table>




              <div class="form-group pull-right">
                <br>
                <a type="button" ng-click="editAddress(addressEdit)" ng-disabled="addressEditForm.$invalid || addressEdit.days.length === 0" class="btn btn-xs btn-primary">Save</a>

                <a type="button" ng-click="showEditAddressForm(false)" class="btn btn-xs btn-default">Cancel</a>
              </div>
          </form>


        </div>

        <!-- <div ng-show="noAddresses" ng-hide = "addAddressForm" align="center">
          <h3><strong>NO ADDRESS! </strong></h3>
        </div> -->


        <div ng-hide="noAddresses">
             

          <table class="table table-striped table-hover" ng-hide="noAddresses">
            <div class="form-group">
              <label for="select" class="col-md-3">Number of rows:</label>
                <div class="col-md-2">
                    <select class="form-control" ng-init="noOfRows = '10'" ng-model="noOfRows">
                      <option value="10">10</option>
                      <option value="25">25</option>
                      <option value="50">50</option>
                    </select>
                </div>
            </div>

            <br><br>
                
            <thead>
              <tr>
                <th>Address Name</th>
                <th>Days</th>
                <th></th>
              </tr>
            </thead>
    
            <tbody>
              <tr dir-paginate="address in addresses | filter:search | orderBy:sortCriteria | itemsPerPage: noOfRows" pagination-id="paginationAddress">

                <td class="routesText">
              

                  {{address.address_name}}
                  

                </td>

                <td class="routesText">
                  
                  <font style="text-transform: capitalize !important;">{{address.days}}
                  </font>

                </td>

                <td style="color:red; cursor:button;" ng-hide="editAddressForm">
                  <a ng-show="editState" class="btn btn-xs btn-default" ng-click="addressEditClicked(address)"><i class="mdi-editor-mode-edit"/>
              &nbsp;Edit&nbsp;</a>

                  <a ng-show="deleteState" class="btn btn-xs btn-default" ng-click="open(address)"><i class="mdi-action-delete"/>&nbsp;Delete</a>
                </td>
              </tr>
            </tbody>

          </table>

           <div align="center">
            <dir-pagination-controls
                pagination-id="paginationAddress"
                max-size="7"
                directional-links="true"
                boundary-links="true"
                class="ng-isolate-scope"
            >
            </dir-pagination-controls>    
          </div>
        </div>

    </div> 
  </div>


  <div class="col-md-6">

    <!--  HIDE FOR PRINTER   -->
<div class="routeshide">


      <h4>ROUTES </h4>
      <div class="panel panel-body">
        <ul class="nav nav-tabs">
          <li ng-hide="noAddresses && noRoutes">
              <a ng-click="showAddRouteBox(true)"><i class="mdi-content-add-box"/> &nbsp;ADD&nbsp;</a>
          </li>
          <li class="pull-right">
          <div class="search" ng-hide="noRoutes">
            <form method="get" action="/search" id="search">
              <input name="q" ng-model="searchRoute.$" type="text" size="50" placeholder="SEARCH" />
            </form>
            </div>
        </li>
        </ul>

          <br>

          <!-- notif msg -->
       <!--    <div ng-show="existingAddressInRouteError">{{existingAddressInRoute}}</div> -->
          <!-- <div ng-show="noAddresses" align="center">
            <h3><strong>NO ADDRESS, ADD ADDRESS FIRST! </strong></h3>
          </div>-->

          <div ng-show="noRoutes" align="center">
            <h3><strong>NO ROUTES! </strong></h3>
          </div>

          <div ng-show="addRouteBox">
              <h4><i class="mdi-content-add-circle"></i> ADD ROUTE</h4>

            <form name="routeAddForm" ng-submit="addRoute(route)" novalidate>

            <div ng-show="hasError" class="alert alert-dismissable alert-danger">
                     <button type="button" class="close" ng-click="showErrorMessage(false)">×</button>
                     <strong>{{errorMessage}}</strong>
                  </div>

              <div class="alert alert-dismissable alert-danger" ng-show="existingAddressInRouteError">
                <button type="button" class="close" ng-click="showExistingAddressInRouteError(false)">×</button>
                <strong>
                  {{existingAddressInRoute}}</strong>
             </div> 

             <br>

              <div class="form-group">
                        <label for="select" class="col-md-3">Company:</label>
                        <div class="col-md-7">
                            <select class="form-control" ng-change="getAdressesAvailable()" ng-model="route.company" ng-init="route.company = companies[0];getAdressesAvailable()">
                              <option ng-repeat="company in companies" value="{{company}}">{{company}}</option>
                            </select>
                        </div>
                    </div>
                    <br>
              <div class="form-group">
                <label class="col-md-3">Route:</label>
                <div class="col-md-7">
                  <input type="text" class="form-control" ng-model="route.route_name" required>
                </div>
              </div>
                <br>
                
                <div>
                  <label class="col-md-3">Addresses:</label>

                  <div class="col-md-7" ng-show="noAddressesAvailable">
                    NO ADDRESS AVAILABLE
                  </div>
                  <div class="col-md-7" ng-hide="noAddressesAvailable">
                    <select class="form-control" ng-model="addressAvailableList" ng-options="address as address.address_name for address in addressesAvailable | orderBy: 'address_name'">
                    </select> 
                  </div>

                    <button ng-hide="noAddressesAvailable" type="button" class="btn btn-xs btn-default  pull-right" align="right" ng-click="addAvaiableAddress(addressAvailableList)">ADD</button>
              </div>

              <br>
              <br>
              <br>
        

                <div class="routeBox"> <br>
                   <button  style = "padding: 4px; padding-left:8px; margin: 4px 4px;" ng-repeat="address in route.address" class="btn btn-xs btn-danger" ng-click="deleteAvailableAddress(address)"> {{address.address_name}} &nbsp; &nbsp; <strong><i class="mdi-navigation-cancel"/></strong>
                   </button> &nbsp;   
                </div>

              <div class="form-group pull-right">
                <br>
                 <button type="submit" ng-disabled="routeAddForm.$invalid || route.address.length === 0" class="btn btn-xs btn-primary">Add</button>
                 <button type="button" ng-click="showAddRouteBox(false)" class="btn btn-xs btn-default">Cancel</button>
              </div>

            </form>

        </div>
      </div>

<!--  HIDE FOR PRINTER   -->
</div>
<br>
         <div class="form-group" ng-hide="noRoutes">
          <label for="select" ng-class = "addBayForm || editOrDeleteBayForm ? 'col-md-3' : 'col-md-2'">Company:</label>
            <div ng-class = "addBayForm || editOrDeleteBayForm ? 'col-md-2' : 'col-md-3'">
                <select class="form-control" ng-init="companySelect = 'Coca-Cola'" ng-model="companySelect">
                  <option value="Coca-Cola">Coca-Cola</option>
                  <option value="SMB">SMB</option>
                </select>
            </div>
          </div>
     <br>     


 <div dir-paginate="routeInfo in routes |filter : searchRoute | filter:companySelect | orderBy:'route_name' | itemsPerPage:2" pagination-id="routesPagination">
      <div class="panel-primary" >

      <input type="hidden" ng-model="MTH.days">
      <input type="hidden" ng-model="TF.days">
      <input type="hidden" ng-model="WS.days">


  <table class="table table-striped" ng-hide="noRoutes" >
            <thead>

              <tr>
                <th>Route {{routeInfo.route_name + " " + routeInfo.company}}</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
    
            <tbody ng-hide="editIndex === $index">
              <tr >
                <td><b>Mon & Thur</b></td>
                <td><b>Tue & Fr</b></td>
                <td><b>Fri & Sat</b></td>
              </tr>


              <tr>
                <td class="routesText">
                  <div class="col-md-offset-1" ng-repeat="address in routeInfo.coke_address | filter:MTH"> - {{address.address_name }} &nbsp; </div>
                  <div class="col-md-offset-1" ng-repeat="address in routeInfo.smb_address | filter:MTH"> - {{address.address_name }} &nbsp; </div>
                </td>

                <td class="routesText">
                  <div class="col-md-offset-1" ng-repeat="address in routeInfo.coke_address | filter:TF"> + {{address.address_name }} &nbsp; </div>
                  <div class="col-md-offset-1" ng-repeat="address in routeInfo.smb_address | filter:TF"> + {{address.address_name }} &nbsp; </div>
                </td>

                <td class="routesText">
                  <div class="col-md-offset-1" ng-repeat="address in routeInfo.coke_address | filter:WS"> - {{address.address_name }} &nbsp; </div>
                  <div class="col-md-offset-1" ng-repeat="address in routeInfo.smb_address | filter:WS"> - {{address.address_name }} &nbsp; </div>
                </td> 
              </tr>
            </tbody>
          </table>


       

                <div class="form-group pull-right" style="margin-bottom: -5px;">
                  <button class="btn btn-xs btn-primary" ng-click="setEditRoute($index)" ng-hide="editIndex === $index">EDIT</button>
                <button class="btn btn-xs btn-default" ng-click="openRoute(routeInfo)" ng-hide="editIndex === $index">DELETE</button>
                <br><br><br><br>

                </div>

          </div>

         

       

          <!-- edit route -->
          <div class="rpanel panel-body" ng-show="editIndex === $index">
            <div>
              <div class="col-md-10" ng-show="noAddressesAvailable">
                  NO ADDRESS AVAILABLE
                  <br><br>
              </div>

               <label ng-hide="noAddressesAvailable" class="col-md-3 control-label" >Available Route:</label>

                <div class="col-md-7" ng-hide="noAddressesAvailable">
                <select class="form-control" ng-model="addressAvailableListEdit" ng-options="address as address.address_name for address in addressesAvailable">
                </select>
              </div>

                <div class="col-md-2">
                    <button class="btn btn-xs btn-default" type="button" ng-click="addAvaiableAddressEdit(addressAvailableListEdit,$index,routeInfo)" ng-hide="noAddressesAvailable">ADD</button>
                </div>
            </div>

          <label class="col-md-12">Address:</label>
                   <button  style = "padding: 4px; padding-left:8px; margin: 4px 4px;" ng-repeat="address in routeInfo.coke_address" class="btn btn-xs btn-danger" ng-click="deleteAddressInRoute(routeInfo.id,address)"> {{address.address_name}} &nbsp; &nbsp; <strong><i class="mdi-navigation-cancel"/></strong>
                   </button> &nbsp;
                   <button  style = "padding: 4px; padding-left:8px; margin: 4px 4px;" ng-repeat="address in routeInfo.smb_address" class="btn btn-xs btn-danger" ng-click="deleteAddressInRoute(routeInfo.id,address)"> {{address.address_name}} &nbsp; &nbsp; <strong><i class="mdi-navigation-cancel"/></strong>
                   </button> &nbsp;
                  
              <br>
    
              <div class="form-group pull-right" style="margin-bottom: -5px;"> 
                <button class="btn btn-xs btn-default" ng-show="editIndex === $index" ng-click="setEditRoute(-1)">DONE</button>
              </div>

             
          </div>
              
        </div>

        <br>
        <br>

      </div>


 <div align="center">
    <dir-pagination-controls
        pagination-id="routesPagination"
        max-size="7"
        directional-links="true"
        boundary-links="true"
    >
    </dir-pagination-controls>    
  </div>



      </div>
         
  </div>
   
   <div class="snackbar-container" data-snackbar="true"></div>

</div>

<!-- Modal -->
<script type="text/ng-template" id="addressModalDelete.html">
      <div class="modal-dialog">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Delete Address</h4> 
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this?</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok()">Yes</button>
            <button class="btn btn-default" ng-click="cancel()">Cancel</button>
        </div>
      </div>
</script>

<!-- Modal -->
<script type="text/ng-template" id="routesModalDelete.html">
      <div class="modal-dialog">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Delete Routes</h4> 
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this?</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok()">Yes</button>
            <button class="btn btn-default" ng-click="cancel()">Cancel</button>
        </div>
      </div>
</script>

<!-- <div style="background-color:red;" ng-repeat="address in addresses" ng-drag="true" ng-drag-data="address" ng-drag-success="onDragComplete($data,$event)">
  Draggable div
</div>

<div style="background-color:green;width:100%;height:200px;" ng-drop="true" ng-drop-success="onDropComplete($data,$event)" >
  Drop area
</div>