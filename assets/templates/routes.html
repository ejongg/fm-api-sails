<!--START OF CONTENT -->


<!-- PAGE HEADERS -->
<div class="row">

  <div class="pageheader-left">
    <h1> Routes </h1>
  </div>

  <div class="pageheader-right">
    <div class="form-group">
      <ul class="nav nav-tabs col-md-12">
        <!-- <li>
          <div class="search" ng-hide="noAddresses || noRoutes">
            <form method="get" action="/search" id="search">
              <input name="q" ng-model="search.$" type="text" size="50" placeholder="SEARCH" />
            </form>
            </div>
        </li> -->
        <li>
          <a ng-hide="noAddresses || noRoutes" ng-click="pagePrint()">
            <h6><i class="mdi-action-print center"/> &nbsp; PRINT</h6></a>
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="container">
  <div class="col-md-6">
    <h4></i>ADDRESS </h4>
    <div class="panel panel-body">
      <ul class="nav nav-tabs">
        <li>
            <a ng-click="showAddAddressForm(true)"><i class="mdi-content-add-box"/>
              &nbsp;ADD&nbsp;</a>
        </li>
        <li>
            <a ng-hide="noAddresses" ng-click="editState = !editState"><i class="mdi-editor-mode-edit"/>
              &nbsp;EDIT&nbsp;</a>
        </li>
        <li>
            <a ng-hide="noAddresses"ng-click="deleteState = !deleteState"><i class="mdi-navigation-cancel"/>
              &nbsp;DELETE&nbsp;</a>
        </li>
        <li class="pull-right">
          <div class="search" ng-hide="noAddresses || noRoutes">
            <form method="get" action="/search" id="search">
              <input name="q" ng-model="search.$" type="text" size="50" placeholder="SEARCH" />
            </form>
            </div>
         </li>
      </ul>

      <br>
       

      <div ng-show="addAddressForm">
      <h4><i class="mdi-content-add-circle"></i> ADD ADDRESS </h4>


<table class="table table-striped table-hover">

          <form name="addressForm" ng-submit="addAddress(address)" novalidate>


                   <tr>
                    <td><label>Address:</label></td>
                    <td colspan="2">
                        <div class="col-md-10">
                            <input type="text" class="form-control" ng-model="address.address_name" required>
                          </div>
                    </td>
                  </tr>

                   <tr>
                    <td><label>Days:</label></td>
                    <td colspan="2">
                      <b>&nbsp; &nbsp; &nbsp;<div class="" ng-repeat="day in address.days" style="display:inline;">{{day}},  </b>
                    </td>
                  </tr>

            <tr>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="mondayButton" ng-change="addDay('monday')"> Monday
                </label>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="tuesdayButton" ng-change="addDay('tuesday')"> Tuesday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="wednesdayButton" ng-change="addDay('wednesday')"> Wednesday
                </label></div>
              </td>
              
            </tr>

            <tr>

              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="thursdayButton" ng-change="addDay('thursday')"> Thursday 
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="fridayButton" ng-change="addDay('friday')"> Friday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="saturdayButton" ng-change="addDay('saturday')"> Saturday
                </label></div>
              </td>
            </tr>
          </table>


           

            <div class="form-group pull-right">
              <br>
              <button type="submit" ng-disabled="addressForm.$invalid || address.days.length === 0" class="btn btn-xs btn-primary">Add</button>
              <a type="button" ng-click="showAddAddressForm(false)" class="btn btn-xs btn-default">Cancel</a>
            </div>

          </form>
        </div>




        <div ng-show="editAddressForm">

          <table class="table table-striped table-hover">
       

                  <h4><i class="mdi-image-edit"></i> EDIT ADDRESS </h4>

   <form name="addressEditForm" novalidate>

                   <tr>
                    <td><label>Address:</label></td>
                    <td colspan="2">
                        <div class="col-md-10">
                            <input type="text" class="form-control" ng-model="addressEdit.address_name" required>
                          </div>
                    </td>
                  </tr>

                   <tr>
                    <td><label>Days:</label></td>
                    <td colspan="2">
                      <b>&nbsp; &nbsp; &nbsp;<div class="" ng-repeat="day in addressEdit.days" style="display:inline;">{{day}}, </b>
                    </td>
                  </tr>

            <tr>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="mondayButtonEdit" ng-change="editDay('monday')"> Monday
                </label>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="tuesdayButtonEdit" ng-change="editDay('tuesday')"> Tuesday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="wednesdayButtonEdit" ng-change="editDay('wednesday')"> Wednesday
                </label></div>
              </td>
              
            </tr>

            <tr>

              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="thursdayButtonEdit" ng-change="editDay('thursday')"> Thursday 
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="fridayButtonEdit" ng-change="editDay('friday')"> Friday
                </label></div>
              </td>
              <td><div class="checkbox">
                <label class="checkbox-inline">
                  <input type="checkbox" ng-model="saturdayButtonEdit" ng-change="editDay('saturday')"> Saturday
                </label></div>
              </td>
            </tr>
          </table>




              <div class="form-group pull-right">
                <br>
                <a type="button" ng-click="editAddress(addressEdit)" ng-disabled="addressEditForm.$invalid || addressEdit.days.length === 0" class="btn btn-xs btn-primary">Save</a>

                <a type="button" ng-click="showEditAddressForm(false)" class="btn btn-xs btn-default">Cancel</a>
              </div>
          </form>


        </div>

        <!-- <div ng-show="noAddresses" ng-hide = "addAddressForm" align="center">
          <h3><strong>NO ADDRESS! </strong></h3>
        </div> -->


        <div class="">

              <div class="form-group">
              <label for="select" class="col-md-3">Number of rows:</label>
                <div class="col-md-2">
                    <select class="form-control" ng-init="noOfRows = '10'" ng-model="noOfRows">
                      <option value="10">10</option>
                      <option value="25">25</option>
                      <option value="50">50</option>
                    </select>
                </div>
            </div>

             <br><br>

          <table class="table table-striped table-hover" ng-hide="noAddresses">
                
            <thead>
              <tr>
                <th>Address Name</th>
                <th>Days</th>
              </tr>
            </thead>
    
            <tbody>
              <tr dir-paginate="address in addresses | filter:search | orderBy:sortCriteria | itemsPerPage: noOfRows" style="cursor:button;">

                <td class="routesText">{{address.address_name}}</td>

                <td class="routesText">{{address.days}}</td>

                <td style="color:red; cursor:button;" ng-hide="editAddressForm">
                  <a ng-show="editState" class="btn btn-xs btn-default" ng-click="addressEditClicked(address)"><i class="mdi-editor-mode-edit"/>
              &nbsp;Edit&nbsp;</a>

                  <a ng-show="deleteState" class="btn btn-xs btn-default" ng-click="deleteAddress(address)"><i class="mdi-action-delete"/>&nbsp;Delete</a>
                </td>
              </tr>
            </tbody>

          </table>

          <div align="center">
                <dir-pagination-controls
                    max-size="7"
                    directional-links="true"
                    boundary-links="true"
                >
                </dir-pagination-controls>    
            </div>

        </div>

    </div> 
  </div>


  <div class="col-md-6">
      <h4>ROUTES </h4>
      <div class="panel panel-body">
        <ul class="nav nav-tabs">
          <li ng-hide="noAddresses">
              <a ng-click="showAddRouteBox(true)"><i class="mdi-content-add-box"/> &nbsp;ADD&nbsp;</a>
          </li>
          <li class="pull-right">
          <div class="search" ng-hide="noAddresses || noRoutes">
            <form method="get" action="/search" id="search">
              <input name="q" ng-model="search.$" type="text" size="50" placeholder="SEARCH" />
            </form>
            </div>
        </li>
        </ul>

          <br>

          <!-- notif msg -->
       <!--    <div ng-show="existingAddressInRouteError">{{existingAddressInRoute}}</div> -->
          <!-- <div ng-show="noAddresses" align="center">
            <h3><strong>NO ADDRESS, ADD ADDRESS FIRST! </strong></h3>
          </div>

          <div ng-show="noRoutes" ng-hide="noAddresses || addRouteBox" align="center">
            <h3><strong>NO ROUTES! </strong></h3>
          </div> -->

          <div ng-show="addRouteBox">
              <h4><i class="mdi-content-add-circle"></i> ADD ROUTE</h4>

            <form name="routeAddForm" ng-submit="addRoute(route)" novalidate>
              <div class="alert alert-dismissable alert-danger" ng-show="existingAddressInRouteError">
                <button type="button" class="close" ng-click="showExistingAddressInRouteError(false)">×</button>
                <strong>{{existingAddressInRoute}}</strong>
             </div> 

             <br>
              <div class="form-group">
                <label class="col-md-3">Route:</label>
                <div class="col-md-8">
                  <input type="text" class="form-control" ng-model="route.route_name" required>
                </div>
                <br>
                <br>
                <label class="col-md-3">Available Route:</label>
                <div class="col-md-8" ng-show="noAddressesAvailable">
                  NO ADDRESS AVAILABLE
                </div>
                <div class="col-md-8" ng-hide="noAddressesAvailable">
                  <select class="form-control" ng-model="addressAvailableList" ng-options="address as address.address_name for address in addressesAvailable">
                  </select> <br>
                  <button type="button" class="btn btn-xs btn-default pull-right" ng-click="addAvaiableAddress(addressAvailableList)">ADD</button>
                </div>
              </div>

              <br>
              <br>
              <br>
              <br>
              <br>

                <div class="routeBox"> <br>
                  <div ng-repeat="address in route.address" style=" z-index: -10000;"> 
                    <div class="col-md-offset-1" style="padding-top:5px;">{{address.address_name}}</div>
                  </div>      
                </div>

              <div class="form-group pull-right">
                <br>
                 <button type="submit" ng-disabled="routeAddForm.$invalid || route.address.length === 0" class="btn btn-xs btn-primary">Add</button>
                 <button type="button" ng-click="showAddRouteBox(false)" class="btn btn-xs btn-default">Cancel</button>
              </div>

            </form>

        </div>
      </div>

    <br><br>
      <!-- routesbox -->
    <div ng-repeat="routeInfo in routes">
      <div class="panel-primary" >
          <div class="panel-heading">
              <h3 class="panel-title">Route {{routeInfo.route_name}}</h3>
          </div>

          <div class="rpanel panel-body" ng-hide="editIndex === $index">
               <label class="control-label">Address:</label>
               <div class=" col-md-offset-1" ng-repeat="address in routeInfo.address">{{address.address_name}}</div>

                <div class="form-group pull-right" style="margin-bottom: -5px;">
                  <button class="btn btn-xs btn-primary" ng-click="setEditRoute($index)" ng-hide="editIndex === $index">EDIT</button>
                <button class="btn btn-xs btn-default" ng-click="deleteRoute(routeInfo)" ng-hide="editIndex === $index">DELETE</button>
                </div>
          </div>
      

          <!-- edit route -->
          <div class="rpanel panel-body" ng-show="editIndex === $index">
            <div>
              <div class="col-md-10" ng-show="noAddressesAvailable">
                  NO ADDRESS AVAILABLE
                  <br><br>
              </div>

               <label ng-hide="noAddressesAvailable" class="col-md-3 control-label" >Available Route:</label>

                <div class="col-md-7" ng-hide="noAddressesAvailable">
                <select class="form-control" ng-model="addressAvailableListEdit" ng-options="address as address.address_name for address in addressesAvailable">
                </select>
              </div>

                <div class="col-md-2">
                    <button class="btn btn-xs btn-default" type="button" ng-click="addAvaiableAddressEdit(addressAvailableListEdit,$index,routeInfo.route_name)" ng-hide="noAddressesAvailable">ADD</button>
                </div>
            </div>

          <label class="col-md-12">Address:</label>
                   <button  style = "padding: 4px; padding-left:8px; margin: 4px 4px;" ng-repeat="address in routeInfo.address" class="btn btn-xs btn-danger" ng-click="deleteAddressInRoute(routeInfo.id,address.id)"> {{address.address_name}} &nbsp; &nbsp; <strong><i class="mdi-navigation-cancel"/></strong>
                   </button> &nbsp;
                  
              <br>
    
              <div class="form-group pull-right" style="margin-bottom: -5px;"> 
                <button class="btn btn-xs btn-default" ng-show="editIndex === $index" ng-click="setEditRoute(-1)">OKAY</button>
              </div>

             
          </div>
              
        </div>

        <br>
        <br>

      </div>




      </div>
         
  </div>
   
</div>

<!-- <div style="background-color:red;" ng-repeat="address in addresses" ng-drag="true" ng-drag-data="address" ng-drag-success="onDragComplete($data,$event)">
  Draggable div
</div>

<div style="background-color:green;width:100%;height:200px;" ng-drop="true" ng-drop-success="onDropComplete($data,$event)" >
  Drop area
</div>